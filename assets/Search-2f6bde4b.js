import{r as a,u as N,j as e,W as S,n as C,c as k,o as E}from"./index-b520193f.js";import{u as M,t as P,a as q,S as D,C as G}from"./SkeletonCard-bacb5184.js";import{G as T}from"./GridContainer-82f981a3.js";import{P as z}from"./Pagination-bd04751f.js";import R from"./Error404Page-78cfc7f0.js";import{E as V}from"./Error500Page-20ed6b86.js";function _(n,r){const[c,d]=a.useState(n);return a.useEffect(()=>{const i=setTimeout(()=>d(n),r||500);return()=>{clearTimeout(i)}},[n,r]),c}const I=n=>{var x;const[r,c]=a.useState("movie"),[d,i]=a.useState(!1),[f,g]=a.useState(""),[o,w]=N(),l=a.useMemo(()=>{let t=parseInt(o.get("page")||"1"),u=o.get("q")||"";return{page:t,search:u}},[o]),p=_(f,1200);a.useEffect(()=>{o.set("q",p),w(o)},[p]);const m=t=>{c(t),i(!1)},b=t=>{g(t.target.value)},{data:s,error:h,isLoading:j,isFetching:y,isFetched:v}=M({queryKey:["search",r,l],queryFn:()=>P.search(r,l.search,{page:l.page}),enabled:l.search!==""});return a.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[s]),h?q.isAxiosError(h&&((x=h.response)==null?void 0:x.status)===404)?e.jsx(R,{}):e.jsx(V,{}):e.jsx("div",{className:"pt-20 pb-12 min-h-[100vh] bg-black-2",children:e.jsxs(S,{children:[e.jsx("form",{action:"#",children:e.jsxs("div",{className:"flex relative  bg-[#212529]  rounded",children:[e.jsxs("button",{id:"dropdown-button","data-dropdown-toggle":"dropdown",className:`flex-shrink-0  inline-flex 
                        items-center py-3 md:py-5 px-2 sm:px-4 text-sm font-medium text-center
                         text-white/70 border-r border-white/70 bg-transparent`,type:"button",onClick:()=>i(t=>!t),children:[C[r],e.jsx("svg",{"aria-hidden":"true",className:"w-4 h-4 ml-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),e.jsx("div",{id:"dropdown",className:k("z-10 absolute top-full hidden mt-2 [&.active]:block e divide-y bg-[#212529]  rounded-lg  w-44",{active:d}),children:e.jsxs("ul",{className:"py-2 text-sm text-white/70 ","aria-labelledby":"dropdown-button",children:[e.jsx("li",{onClick:()=>m("movie"),children:e.jsx("a",{href:"#",className:"block px-4 py-2  ",children:"Movies"})}),e.jsx("li",{onClick:()=>m("tv"),children:e.jsx("a",{href:"#",className:"block px-4 py-2 ",children:"TV-Series"})})]})}),e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"text",id:"search-dropdown",name:"search",onChange:b,className:"h-full pr-10 sm:pr-14 pl-4  placeholder:text-white/40 text-center block  w-full z-20 md:text-2xl bg-transparent text-white/70  focus:outline-none",placeholder:"Enter your keywords...",required:!0}),e.jsx("div",{className:`absolute loader top-2/4  -translate-y-2/4 right-0  text-sm font-medium text-white/70 ${y?"block":"hidden"}`,children:e.jsx(E,{visible:!0,height:"40",width:"40",ariaLabel:"MagnifyingGlass-loading",wrapperStyle:{},wrapperClass:"MagnifyingGlass-wrapper",glassColor:"#c0efff",color:"#7a7c7f"})})]})]})}),e.jsxs("div",{className:"mt-12",children:[v&&(!s||s.data.results.length<=0)&&e.jsxs("div",{className:"text-white/70 text-center text-2xl",children:['Results not found for "',l.search,'".']}),l.search===""&&e.jsx("div",{className:"text-white/70 text-center text-2xl",children:"Search results will be displayed below."}),e.jsxs(T,{className:"lg:gap-x-3 gap-y-6 gap-x-2",children:[l.search!==""&&j&&new Array(14).fill(0).map((t,u)=>e.jsx(D,{},u.toString()+"movies")),s==null?void 0:s.data.results.map(t=>t.poster_path?e.jsx(G,{data:t,mediaType:r},t.id.toString()):null)]})]}),s&&s.data.results.length>0&&e.jsx(z,{total:s&&s.data.total_pages>500?1e4:Math.floor(s.data.total_results/20),pageSize:20,defaultCurrent:1,className:"mt-6 w-fully"})]})})};export{I as default};
